# Icon <maturity-badge rfc>(Request for feedback)</maturity-badge>

## The problem

The [`<iron-icon>`](https://vaadin.com/directory/component/polymerelementsiron-icon) element has the following limitations:

 - If you use `<iron-icon>` inside your own reusable component and hard-code the `icon` attribute to a specific icon, there is no way to change that icon from the outside

 - You can work around that by exposing an attribute and/or a property in your components public API, but that would limit customisation to per-instance basis

 - You could work around that by reading the attribute or property value from a global property so the user of your component could easily change the icon for all instances of your component. But that makes it difficult for designers to set the icons, as they are mainly accustomed to styling icons with CSS (using `background-image` for example).

 - It forces you to create a `<iron-iconset-svg>` collection to be able to reference an icon by name. This is also problematic in terms of performance as you potentially end up sending unused icons to the user.

## Solution

The `<j-icon>` element reads the icon SVG path from the computed style of the element, from a custom CSS property, making it possible to change the icon with CSS.

## Limitations

The icon SVG is updated when the `<j-icon>` element is attached to the DOM. It is not possible to change the icon with CSS when the icon is attached to the DOM, for example using a `:hover` selector. In order to update the icon when it’s attached to the DOM you need to call the `updateIcon()` JavaScript method to make it read the SVG path again from the computed style.

Note, that `<iron-icon>` has the same limitation (you can’t update the icon SVG with CSS).

## Examples

### Default icon

The default icon is a `1.5em` placeholder box.

```html,live
<j-icon></j-icon>
```

### Custom icon path

```html,live
<j-icon class="user"></j-icon>

<style>
  .user {
    --svg: <path d="M12 12c-1.656854 0-3-1.343146-3-3s1.343146-3 3-3 3 1.343146 3 3-1.343146 3-3 3zm-7 7c0-2.761424 3.134007-5 7-5s7 2.238576 7 5H5z"/>;
    --viewbox: 0 0 24 24;
  }
</style>
```


### Styling with CSS

```html,live
<j-icon class="user big"></j-icon>
<j-icon class="user big stroke"></j-icon>

<style>
  .big {
    --j-icon-size: 64px;
    color: var(--lumo-primary-color);
  }

  .stroke {
    fill: none;
    stroke-width: 0.05em;
  }

  .big:hover {
    color: var(--lumo-success-color);
  }
</style>
```

### Custom loading indicator

```html,live
<div class="spinner">
  <j-icon></j-icon>
</div>

<style>
  .spinner {
    padding: 12px;
    width: 24px;
    height: 24px;
    border-radius: 6px;
    background-color: rgba(0,0,0,0.8);
    color: white;
  }

  .spinner j-icon {
    display: block;
    animation: spin-360 0.6s steps(15, end) infinite;

    --svg: <path d="M12,0 C12.5328755,-9.78876463e-17 12.9648565,0.431980966 12.9648565,0.964856493 L12.9648565,4.82428247 C12.9648565,5.35715799 12.5328755,5.78913896 12,5.78913896 C11.4671245,5.78913896 11.0351435,5.35715799 11.0351435,4.82428247 L11.0351435,0.964856493 C11.0351435,0.431980966 11.4671245,9.78876463e-17 12,0 Z"></path>
    <path d="M16.9055311,1.04270283 C17.3923372,1.25944283 17.6112689,1.82977957 17.3945289,2.31658559 L15.8247589,5.84234666 C15.6080189,6.32915267 15.0376822,6.54808443 14.5508762,6.33134443 C14.0640702,6.11460443 13.8451384,5.54426769 14.0618784,5.05746167 L15.6316484,1.53170061 C15.8483884,1.04489459 16.4187251,0.825962829 16.9055311,1.04270283 Z" opacity="0.07"></path>
    <path d="M20.9628514,3.99051854 C21.3194147,4.38652223 21.287442,4.99659833 20.8914383,5.35316166 L18.0233258,7.9356217 C17.6273221,8.29218502 17.017246,8.26021229 16.6606827,7.8642086 C16.3041194,7.46820491 16.3360921,6.8581288 16.7320958,6.50156548 L19.6002083,3.91910544 C19.9962119,3.56254211 20.6062881,3.59451484 20.9628514,3.99051854 Z" opacity="0.13"></path>
    <path d="M23.4704132,8.33374299 C23.6350808,8.84053774 23.3577319,9.38486551 22.8509372,9.5495331 L19.180405,10.7421613 C18.6736102,10.9068289 18.1292825,10.6294801 17.9646149,10.1226853 C17.7999473,9.61589057 18.0772961,9.0715628 18.5840909,8.90689521 L22.2546231,7.71426699 C22.7614178,7.5495994 23.3057456,7.82694825 23.4704132,8.33374299 Z" opacity="0.2"></path>
    <path d="M23.9946364,13.3213932 C23.9389357,13.8513496 23.4641669,14.2358098 22.9342105,14.1801092 L19.0959268,13.7766893 C18.5659705,13.7209887 18.1815102,13.2462198 18.2372109,12.7162634 C18.2929116,12.1863071 18.7676804,11.8018468 19.2976368,11.8575475 L23.1359204,12.2609674 C23.6658768,12.316668 24.050337,12.7914369 23.9946364,13.3213932 Z" opacity="0.26"></path>
    <path d="M22.4448779,18.0910592 C22.1784402,18.552543 21.5883432,18.710659 21.1268594,18.4442212 L17.7844985,16.5145082 C17.3230148,16.2480705 17.1648988,15.6579735 17.4313365,15.1964898 C17.6977743,14.735006 18.2878713,14.57689 18.749355,14.8433278 L22.0917159,16.7730408 C22.5531997,17.0394785 22.7113157,17.6295755 22.4448779,18.0910592 Z" opacity="0.33"></path>
    <path d="M19.0891052,21.8180224 C18.6579999,22.1312388 18.0546079,22.0356709 17.7413915,21.6045655 L15.4728778,18.4822243 C15.1596615,18.051119 15.2552294,17.447727 15.6863347,17.1345106 C16.1174401,16.8212942 16.7208321,16.9168621 17.0340484,17.3479675 L19.3025621,20.4703087 C19.6157785,20.9014141 19.5202106,21.504806 19.0891052,21.8180224 Z" opacity="0.39"></path>
    <path d="M14.5075618,23.857857 C13.9863309,23.968648 13.4739759,23.6359208 13.3631848,23.1146898 L12.560765,19.3396016 C12.449974,18.8183707 12.7827012,18.3060156 13.3039321,18.1952246 C13.8251631,18.0844335 14.3375181,18.4171608 14.4483092,18.9383917 L15.2507289,22.71348 C15.36152,23.2347109 15.0287927,23.7470659 14.5075618,23.857857 Z" opacity="0.46"></path>
    <path d="M9.49243819,23.857857 C8.97120727,23.7470659 8.63848002,23.2347109 8.74927107,22.71348 L9.55169085,18.9383917 C9.6624819,18.4171608 10.1748369,18.0844335 10.6960679,18.1952246 C11.2172988,18.3060156 11.550026,18.8183707 11.439235,19.3396016 L10.6368152,23.1146898 C10.5260241,23.6359208 10.0136691,23.968648 9.49243819,23.857857 Z" opacity="0.53"></path>
    <path d="M4.91089478,21.8180224 C4.47978943,21.504806 4.38422153,20.9014141 4.6974379,20.4703087 L6.96595157,17.3479675 C7.27916795,16.9168621 7.88255993,16.8212942 8.31366529,17.1345106 C8.74477065,17.447727 8.84033855,18.051119 8.52712217,18.4822243 L6.2586085,21.6045655 C5.94539213,22.0356709 5.34200014,22.1312388 4.91089478,21.8180224 Z" opacity="0.59"></path>
    <path d="M1.55512207,18.0910592 C1.28868431,17.6295755 1.44680032,17.0394785 1.90828406,16.7730408 L5.250645,14.8433278 C5.71212874,14.57689 6.30222572,14.735006 6.56866348,15.1964898 C6.83510124,15.6579735 6.67698523,16.2480705 6.21550149,16.5145082 L2.87314056,18.4442212 C2.41165681,18.710659 1.82155984,18.552543 1.55512207,18.0910592 Z" opacity="0.66"></path>
    <path d="M0.0053636468,13.3213932 C-0.0503370131,12.7914369 0.33412321,12.316668 0.864079589,12.2609674 L4.70236322,11.8575475 C5.2323196,11.8018468 5.70708844,12.1863071 5.7627891,12.7162634 C5.81848976,13.2462198 5.43402953,13.7209887 4.90407315,13.7766893 L1.06578952,14.1801092 C0.535833143,14.2358098 0.0610643067,13.8513496 0.0053636468,13.3213932 Z" opacity="0.73"></path>
    <path d="M0.529586812,8.33374299 C0.694254406,7.82694825 1.23858218,7.5495994 1.74537692,7.71426699 L5.41590914,8.90689521 C5.92270388,9.0715628 6.20005274,9.61589057 6.03538514,10.1226853 C5.87071755,10.6294801 5.32638978,10.9068289 4.81959503,10.7421613 L1.14906281,9.5495331 C0.642268071,9.38486551 0.364919218,8.84053774 0.529586812,8.33374299 Z" opacity="0.79"></path>
    <path d="M3.03714862,3.99051854 C3.39371195,3.59451484 4.00378805,3.56254211 4.39979174,3.91910544 L7.26790418,6.50156548 C7.66390787,6.8581288 7.69588061,7.46820491 7.33931728,7.8642086 C6.98275396,8.26021229 6.37267785,8.29218502 5.97667416,7.9356217 L3.10856172,5.35316166 C2.71255803,4.99659833 2.6805853,4.38652223 3.03714862,3.99051854 Z" opacity="0.86"></path>
    <path d="M7.09446886,1.04270283 C7.58127488,0.825962829 8.15161162,1.04489459 8.36835162,1.53170061 L9.93812158,5.05746167 C10.1548616,5.54426769 9.93592983,6.11460443 9.44912381,6.33134443 C8.96231779,6.54808443 8.39198105,6.32915267 8.17524105,5.84234666 L6.60547109,2.31658559 C6.38873108,1.82977957 6.60766284,1.25944283 7.09446886,1.04270283 Z" opacity="0.93"></path>;
  }

  @keyframes spin-360 {
    100% {
      transform: rotate(360deg);
    }
  }
</style>
```
